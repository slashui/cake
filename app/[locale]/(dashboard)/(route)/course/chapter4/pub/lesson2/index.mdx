---
title: Git的原理
videoUrl: /template.mp4

---
Git 这个概念乍一看可能让人感到困惑，但理解几个关键概念后，一切就会变得清晰很多。在本教程中，我们将通过逐步讲解 Git 的基本命令流程，并消除一些常见的误解，来帮助你掌握 Git 的使用。我是 Saan，畅销系统设计面试书籍的合著者。我们通过动画来解释复杂的系统设计概念。让我们开始吧！

## Git 中代码的存储位置
在深入讲解命令之前，我们先明确 Git 中代码的历史究竟存在于哪里。一个常见的误解是，代码只存在于两个地方——比如 GitHub 或我们的本地机器。但实际上，代码存在于 四个不同的位置：
- 工作目录 (Working Directory): 这是我们本地编辑文件的区域，可以把它看作是我们的“游乐场”。
- 暂存区 (Staging Area): 这是在提交 (commit) 之前，用于临时存放修改内容的地方。
- 本地仓库 (Local Repository): 这是我们本地存储已提交 (committed) 修改的地方。
- 远程仓库 (Remote Repository): 像 GitHub 这样的服务器，用于共享和备份代码。

理解了这四个位置，我们就可以可视化代码在其整个生命周期中的“旅程”。大多数 Git 命令都会在这四个位置之间移动文件。

## 基本操作流程

**1. 克隆仓库：git clone**
第一步是使用 git clone 命令克隆一个已存在的仓库。这样你就会拥有一个项目的本地版本，可以进行开发，并包含项目的完整历史记录。
在本地克隆了一个仓库后，代码会出现在你的 工作目录 中。这是你的本地开发环境，你可以在这里对代码进行修改。

**2. 修改文件并暂存：git add**
现在，当你开始处理一个文件并准备提交修改时，你需要使用 git add 命令将这些文件的快照暂存到 暂存区。你可以把暂存区想象成一个检查点，你的更改在这里被准备好，以便最终确定。
```bash
git add 文件名
```

**3. 提交修改：git commit**
下一步是使用 git commit 命令，它会获取暂存区的快照，并将其保存到你的 本地仓库。这通过创建一个永久记录来锁定这些状态变化，你可以随时回顾，就像时间上的快照一样。
```bash
git commit -m "提交说明"
```

**4. 推送至远程仓库：git push**
你的代码不仅仅停留在本地机器上。当你准备好与团队分享你的进展或备份你的工作时，使用 git push 命令将你的提交推送到 远程仓库。这通常是一个共享服务器，你的团队可以在上面协作，比如 GitHub 或 Bitbucket。
```bash
git push origin 分支名
```

**5. 拉取更新：git pull**
在 Git 中协作是一个双向交流的过程。要整合你团队成员的工作，你需要使用 git pull 命令。它会从远程仓库获取更改，并将它们合并到你的本地仓库。git pull 实际上结合了两个命令：
- git fetch：抓取最新的更新。
- git merge：将这些更新整合到你的工作中。
```bash
git pull origin 分支名
```

**6. 切换分支：git checkout 或 git switch**
有时候，你需要切换上下文，比如修复另一个分支上的错误。这时 git checkout 或 git switch 就派上用场了。它允许你在不同的分支之间切换，从而处理特定的功能。
```bash
git checkout 分支名
# 或
git switch 分支名
```

## 分支管理
Git 分支允许你从主代码库“分叉”出一个新的分支，这样你就可以在这个分支上开发新功能，而不会影响到主代码。

**创建分支：git branch**
使用 git branch 命令创建新分支：
```bash
git branch 新分支名
```

**切换分支：git switch**
使用 git switch 在分支之间切换：
```bash
git switch 新分支名
```

**合并分支：git merge**
将分支合并起来，通常使用 git merge 命令。如果修改的代码有重叠，你可能需要解决合并冲突。
```bash
git merge 分支名
```

分支的使用可以让你独立开发并更好地进行协作。当然，在合并或变基 (rebase) 来自其他人的修改，或者管理分支时，还有很多细节需要注意。