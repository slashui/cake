# 2025-08-28

## 一些小的修改：
- 优化播放器界面，移除用户查看视频时显示的非必要信息（包括播放器来源和StreamID，HTML5切换功能）。
- 在课程管理系统中，删除lesson模块内手动设置的所有视频相关信息，包括视频URL、StreamID以及缩略图数据。确保这些字段被完全清除且不可恢复。
- 在上传视频时，将当前的进度条显示方式改为圆形进度指示器（旋转圆圈）。保持流畅的动画效果。
- 看一下http://localhost:3000/cn/admin的头部的导航，三个标签。修改http://localhost:3000/cn/invite-codes的头部
- 这是http://localhost:3001/cn/invite-codes，左边的菜单时哪里来的？dashboard都没有左边的菜单，为什么invite-codes有呢？
- 这个邀请码列表中的每一个邀请码框都太高了，缩小一半。

## 增加课件上传功能
在“课程管理”的lesson编辑页面中，为管理员添加一个课件上传功能。具体要求如下：

1. 文件上传限制：

- 允许上传单个文件

- 文件大小不超过10MB

2. 存储方案：

- 将上传的文件存储到CloudFlare R2服务中

3. 前台展示：

- 在课程内容区域显示已上传的课件附件

- 为用户提供下载功能，点击附件即可下载

4. 实现要求：

- 确保上传过程安全可靠

- 提供清晰的上传状态反馈，圆圈loading就行，不用进度显示

- 在前台展示时保持一致的UI风格

## 部署到dokploy

查看数据库的命令
psql -U postgres -d cake    #进入数据库
\l                          #查看数据库列表
\c cake                     #进入cake数据库
\dt                         #查看数据库表
SELECT * FROM <表名>;        #查看表数据


# 2025-08-29

## RedditHunt

部署：将现有RedditHunt项目部署到dokploy，昨天没部署上去域名的DNS有问题，所以只能重新安装。
设计数据库：根据潘石给的文档，设计数据库表结构。

## Cake UI改造
1、走一遍功能。需要修改的地方
   1-1 dashboard 最上面的右侧部分是学习统计，改成当前的用户邮箱和“退出登录”的按钮
   1-2 课程点击进去是草稿状态，告知用户，“课程开发中，此课程暂无内容，请联系管理员添加章节和课时。”这很好，但这个页面的高度太小，并且请重新弄设计这个页面，符合现在的风格。
   1-3 做一个小插件，可以测试课程目录下是不是有这个课程id。没有的话就要在课程数据库里删除掉。
   1-4 找到不能创建文件的问题了，是远程给的权限不够，所以没办法创建Metadata.json的文件。修改了权限就可以了。以后不一起更新course的内容了。写在ignore里。
   1-5 课程的属性里有一个“发布状态”，草稿状态在前端，用户确实看到课程正在开发中。但变成“已发布”状态，前端依然不变化。
2、把UI改一版能看的。
3、我发现一个大bug，我现在构建课程的方式是在文件夹里创建层级结构，信息在一个叫metadata的json里去管理。但我要维护这个程序需要经常的去提交代码到github，github会自动部署到dokploy上，索尼就会把我线上的正式版的课程全部覆盖掉。所以这就是一个大bug，最好的办法就是不用这个文件系统，而是改成把课程的所有信息在数据库中维护。数据库是postgres支持json的存储，是不是可以把课程信息的metadata.json文件内容都存储到数据库中。


# 2025-08-30
## 部署Course到洛克AI
1、修改UI
2、设计三个课程